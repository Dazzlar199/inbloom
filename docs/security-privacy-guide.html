<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>특별시 보안 & 프라이버시 가이드</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap");

      :root {
        --primary: #18181b;
        --primary-light: #3f3f46;
        --primary-dark: #09090b;
        --accent: #52525b;
        --bg-light: #fafafa;
        --text-dark: #18181b;
        --text-gray: #52525b;
        --text-light: #a1a1aa;
        --border: #e4e4e7;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --info: #3b82f6;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        scroll-behavior: smooth;
      }

      body {
        font-family: "Inter", "Noto Sans KR", -apple-system, BlinkMacSystemFont,
          sans-serif;
        background: #f4f4f5;
        color: var(--text-dark);
        line-height: 1.7;
        letter-spacing: -0.02em;
      }

      .page {
        width: 210mm;
        min-height: 297mm;
        padding: 15mm 20mm 25mm 20mm;
        margin: 20px auto;
        background: white;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        page-break-after: always;
        border-radius: 4px;
        position: relative;
      }

      .cover {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        min-height: 257mm;
      }

      .cover-badge {
        display: inline-block;
        background: var(--primary);
        color: white;
        padding: 8px 24px;
        border-radius: 30px;
        font-size: 14px;
        font-weight: 500;
        margin-bottom: 30px;
      }

      .cover-title {
        font-size: 42px;
        font-weight: 900;
        color: var(--text-dark);
        margin-bottom: 16px;
        line-height: 1.3;
      }

      .cover-subtitle {
        font-size: 20px;
        color: var(--text-gray);
        margin-bottom: 40px;
      }

      .section-header {
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 3px solid var(--primary);
      }

      .section-badge {
        display: inline-block;
        background: var(--primary);
        color: white;
        padding: 6px 16px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        margin-bottom: 12px;
      }

      .section-title {
        font-size: 28px;
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 8px;
      }

      h3 {
        font-size: 18px;
        font-weight: 700;
        color: var(--primary-dark);
        margin: 24px 0 12px 0;
        padding: 0 0 12px 12px;
        border-left: 4px solid var(--primary);
      }

      h4 {
        font-size: 16px;
        font-weight: 600;
        margin: 20px 0 10px 0;
      }

      p {
        font-size: 14px;
        margin-bottom: 12px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 16px 0;
        font-size: 13px;
      }

      th,
      td {
        padding: 12px 16px;
        text-align: left;
        border: 1px solid var(--border);
      }

      th {
        background: var(--primary);
        color: white;
        font-weight: 600;
      }

      tr:nth-child(even) {
        background: var(--bg-light);
      }

      .alert {
        padding: 16px 20px;
        border-radius: 8px;
        margin: 16px 0;
        font-size: 13px;
      }

      .alert-info {
        background: #eff6ff;
        border-left: 4px solid #3b82f6;
        color: #1e3a8a;
      }

      .alert-warning {
        background: #fffbeb;
        border-left: 4px solid #f59e0b;
        color: #92400e;
      }

      .alert-success {
        background: #ecfdf5;
        border-left: 4px solid #10b981;
        color: #065f46;
      }

      .alert-danger {
        background: #fef2f2;
        border-left: 4px solid #ef4444;
        color: #991b1b;
      }

      .alert-title {
        font-weight: 600;
        margin-bottom: 6px;
      }

      ul,
      ol {
        margin: 12px 0 12px 24px;
        font-size: 14px;
      }

      ol.numbered-list {
        list-style: decimal;
        margin: 16px 0 16px 32px;
      }

      li {
        margin: 8px 0;
      }

      .checklist {
        list-style: none;
        margin: 16px 0;
      }

      .checklist li {
        padding: 10px 0 10px 32px;
        position: relative;
        border-bottom: 1px solid var(--border);
      }

      .checklist li:before {
        content: "☐";
        position: absolute;
        left: 0;
        color: var(--primary);
        font-size: 16px;
      }

      .page-number {
        position: absolute;
        bottom: 15mm;
        right: 25mm;
        font-size: 12px;
        color: var(--text-light);
      }

      .sidebar {
        position: fixed;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        width: 240px;
        max-height: 80vh;
        overflow-y: auto;
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        z-index: 1000;
      }

      .sidebar-title {
        font-size: 14px;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 2px solid var(--primary);
      }

      .sidebar-nav {
        list-style: none;
      }

      .sidebar-nav li {
        margin: 4px 0;
      }

      .sidebar-nav a {
        display: block;
        padding: 8px 12px;
        font-size: 13px;
        color: var(--text-gray);
        text-decoration: none;
        border-radius: 6px;
        transition: all 0.2s;
      }

      .sidebar-nav a:hover {
        background: var(--bg-light);
        color: var(--primary);
      }

      .sidebar-nav a.active {
        background: var(--primary);
        color: white;
      }

      code {
        background: #f3f4f6;
        padding: 2px 6px;
        border-radius: 4px;
        font-family: "SF Mono", "Monaco", "Consolas", monospace;
        font-size: 13px;
        color: var(--text-dark);
      }

      pre {
        background: #f9fafb;
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 16px;
        margin: 16px 0;
        overflow-x: auto;
        font-family: "SF Mono", "Monaco", "Consolas", monospace;
        font-size: 12px;
        line-height: 1.6;
        page-break-inside: avoid;
      }

      pre code {
        background: none;
        padding: 0;
      }

      @media (max-width: 1400px) {
        .sidebar {
          display: none;
        }
      }

      @media print {
        .sidebar {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <!-- 사이드바 네비게이션 -->
    <div class="sidebar">
      <div class="sidebar-title">목차</div>
      <ul class="sidebar-nav">
        <li><a href="#chapter-01">제1장: 보안 개요</a></li>
        <li><a href="#chapter-02">제2장: 개인정보 암호화</a></li>
        <li><a href="#chapter-03">제3장: 결제 보안</a></li>
        <li><a href="#chapter-04">제4장: 데이터 유출 대응</a></li>
        <li><a href="#chapter-05">제5장: GDPR/개인정보보호법</a></li>
        <li><a href="#chapter-06">제6장: 보안 점검 체크리스트</a></li>
        <li><a href="#chapter-07">제7장: 보안 인시던트 대응</a></li>
      </ul>
    </div>

    <!-- 표지 -->
    <div class="page">
      <div class="cover">
        <div class="cover-badge">Security & Privacy Guide</div>
        <h1 class="cover-title">특별시<br />보안 & 프라이버시 가이드</h1>
        <p class="cover-subtitle">사용자 신뢰 및 규정 준수를 위한 보안 정책</p>

        <div
          style="
            margin-top: 40px;
            padding: 24px 40px;
            background: var(--bg-light);
            border-radius: 16px;
          "
        >
          <p><strong>버전:</strong> 1.0</p>
          <p><strong>작성일:</strong> 2026년 1월 2일</p>
          <p><strong>대상:</strong> 개발팀, 보안팀, 운영팀</p>
          <p>
            <strong>범위:</strong> 개인정보 암호화, 결제 보안, 데이터 유출 대응,
            GDPR/개인정보보호법 준수
          </p>
        </div>
      </div>
    </div>

    <!-- 제1장: 보안 개요 -->
    <div class="page" id="chapter-01">
      <div class="section-header">
        <div class="section-badge">Chapter 01</div>
        <h2 class="section-title">보안 개요</h2>
      </div>

      <h3>1.1. 보안의 중요성</h3>

      <p>
        웨딩 플랫폼은
        <strong>고객의 개인정보, 결제 정보, 사진/영상 등 민감한 데이터</strong
        >를 다루므로 보안이 핵심입니다.
      </p>

      <div class="alert alert-danger">
        <div class="alert-title">보안 사고 시 영향</div>
        <ul style="margin-top: 8px">
          <li>법적 책임 (개인정보보호법 위반, 손해배상)</li>
          <li>신뢰도 하락 (브랜드 이미지 손상, 사용자 이탈)</li>
          <li>금전적 손실 (과징금, 보상금, 영업 중단)</li>
          <li>규제 제재 (개인정보보호위원회 과징금, 서비스 정지)</li>
        </ul>
      </div>

      <h3>1.2. 보안 원칙 (CIA Triad)</h3>

      <table>
        <thead>
          <tr>
            <th>원칙</th>
            <th>의미</th>
            <th>적용 방법</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>기밀성 (Confidentiality)</strong></td>
            <td>인가된 사용자만 정보에 접근</td>
            <td>암호화, 접근 제어, 인증/인가</td>
          </tr>
          <tr>
            <td><strong>무결성 (Integrity)</strong></td>
            <td>정보가 변경되지 않았음을 보장</td>
            <td>해시 검증, 전자서명, 감사 로그</td>
          </tr>
          <tr>
            <td><strong>가용성 (Availability)</strong></td>
            <td>인가된 사용자가 필요시 접근 가능</td>
            <td>백업, 재해복구, DDoS 방어</td>
          </tr>
        </tbody>
      </table>

      <h3>1.3. 보안 책임 범위</h3>

      <table>
        <thead>
          <tr>
            <th>역할</th>
            <th>책임</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>개발팀</strong></td>
            <td>
              • 안전한 코드 작성<br />
              • 보안 테스트 수행<br />
              • 취약점 패치<br />
              • 보안 모범 사례 준수
            </td>
          </tr>
          <tr>
            <td><strong>보안팀</strong></td>
            <td>
              • 보안 정책 수립<br />
              • 정기 보안 점검<br />
              • 인시던트 대응<br />
              • 보안 교육
            </td>
          </tr>
          <tr>
            <td><strong>운영팀</strong></td>
            <td>
              • 인프라 보안 설정<br />
              • 로그 모니터링<br />
              • 백업 관리<br />
              • 접근 권한 관리
            </td>
          </tr>
        </tbody>
      </table>

      <h3>1.4. 기술 스택별 보안 고려사항</h3>

      <table>
        <thead>
          <tr>
            <th>기술 스택</th>
            <th>보안 기능</th>
            <th>주요 고려사항</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Supabase</strong></td>
            <td>
              • Row Level Security (RLS)<br />
              • JWT 인증<br />
              • SSL/TLS 암호화<br />
              • 데이터베이스 암호화
            </td>
            <td>
              • RLS 정책 필수 설정<br />
              • 서비스 역할 키 보호<br />
              • 환경 변수 안전 관리
            </td>
          </tr>
          <tr>
            <td><strong>Flutter</strong></td>
            <td>
              • Secure Storage<br />
              • Certificate Pinning<br />
              • 코드 난독화
            </td>
            <td>
              • 민감 정보 Secure Storage 저장<br />
              • API 키 클라이언트 노출 방지<br />
              • 앱 서명 검증
            </td>
          </tr>
          <tr>
            <td><strong>FastAPI</strong></td>
            <td>
              • API 인증/인가<br />
              • 입력 검증<br />
              • Rate Limiting
            </td>
            <td>
              • 웹훅 서명 검증<br />
              • SQL Injection 방지<br />
              • CORS 설정
            </td>
          </tr>
          <tr>
            <td><strong>토스페이먼츠</strong></td>
            <td>
              • PCI DSS 준수<br />
              • 암호화 결제<br />
              • 위변조 방지
            </td>
            <td>
              • 서버 사이드 검증<br />
              • 웹훅 검증<br />
              • 결제 정보 저장 금지
            </td>
          </tr>
        </tbody>
      </table>

      <div class="page-number">1</div>
    </div>

    <!-- 제2장: 개인정보 암호화 -->
    <div class="page" id="chapter-02">
      <div class="section-header">
        <div class="section-badge">Chapter 02</div>
        <h2 class="section-title">개인정보 암호화</h2>
      </div>

      <h3>2.1. 암호화 기본 원칙</h3>

      <p>
        개인정보는 <strong>전송 중(Transport)과 저장 시(At Rest)</strong> 모두
        암호화되어야 합니다.
      </p>

      <table>
        <thead>
          <tr>
            <th>구분</th>
            <th>암호화 방식</th>
            <th>구현 방법</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>전송 중 (Transport)</strong></td>
            <td>TLS 1.3</td>
            <td>
              • HTTPS 필수 사용<br />
              • SSL 인증서 갱신<br />
              • Certificate Pinning (모바일)
            </td>
          </tr>
          <tr>
            <td><strong>저장 시 (At Rest)</strong></td>
            <td>AES-256</td>
            <td>
              • 데이터베이스 암호화<br />
              • 파일 시스템 암호화<br />
              • 백업 암호화
            </td>
          </tr>
        </tbody>
      </table>

      <h3>2.2. 데이터베이스 암호화 (Supabase PostgreSQL)</h3>

      <h4>2.2.1. Supabase 암호화 기능</h4>

      <div class="alert alert-info">
        <div class="alert-title">Supabase 기본 보안</div>
        <ul style="margin-top: 8px">
          <li>
            <strong>디스크 암호화:</strong> 모든 데이터는 AES-256으로 자동
            암호화
          </li>
          <li>
            <strong>네트워크 암호화:</strong> TLS 1.3으로 모든 연결 암호화
          </li>
          <li><strong>백업 암호화:</strong> 자동 백업도 암호화되어 저장</li>
        </ul>
      </div>

      <h4>2.2.2. 민감 정보 암호화 (애플리케이션 레벨)</h4>

      <p>
        Supabase의 기본 암호화 외에도, <strong>특히 민감한 개인정보</strong>는
        애플리케이션 레벨에서 추가 암호화를 권장합니다.
      </p>

      <pre><code>-- PostgreSQL 확장 기능 사용 (pgcrypto)
CREATE EXTENSION IF NOT EXISTS pgcrypto;

-- 암호화된 컬럼 예시 (전화번호)
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) NOT NULL,
    phone_encrypted BYTEA,  -- 암호화된 전화번호
    phone_hash VARCHAR(255),  -- 해시값 (검색용)
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 암호화 함수 (애플리케이션에서 호출)
CREATE OR REPLACE FUNCTION encrypt_phone(phone TEXT)
RETURNS BYTEA AS $$
BEGIN
    RETURN pgp_sym_encrypt(phone, current_setting('app.encryption_key'));
END;
$$ LANGUAGE plpgsql;

-- 복호화 함수
CREATE OR REPLACE FUNCTION decrypt_phone(phone_encrypted BYTEA)
RETURNS TEXT AS $$
BEGIN
    RETURN pgp_sym_decrypt(phone_encrypted, current_setting('app.encryption_key'));
END;
$$ LANGUAGE plpgsql;</code></pre>

      <div class="alert alert-warning">
        <div class="alert-title">암호화 키 관리</div>
        <ul style="margin-top: 8px">
          <li>암호화 키는 환경 변수로 관리 (절대 코드에 하드코딩 금지)</li>
          <li>키 로테이션 정책 수립 (90일마다)</li>
          <li>키는 별도 키 관리 서비스(AWS KMS, HashiCorp Vault) 사용 권장</li>
          <li>키 접근 권한 최소화 (필요한 사람만 접근)</li>
        </ul>
      </div>

      <h3>2.3. 비밀번호 해싱</h3>

      <h4>2.3.1. Supabase Auth 사용 (권장)</h4>

      <p>
        Supabase Auth를 사용하면 비밀번호 해싱이 자동으로 처리됩니다.
        <strong>bcrypt</strong> 알고리즘을 사용하여 안전하게 저장됩니다.
      </p>

      <div class="alert alert-success">
        <div class="alert-title">Supabase Auth 보안 기능</div>
        <ul style="margin-top: 8px">
          <li><strong>자동 해싱:</strong> bcrypt 알고리즘으로 비밀번호 해싱</li>
          <li><strong>Salt 자동 생성:</strong> 각 비밀번호마다 고유한 Salt</li>
          <li>
            <strong>비밀번호 정책:</strong> 최소 길이, 복잡도 요구사항 설정 가능
          </li>
          <li>
            <strong>해시 원본 저장 금지:</strong> 원본 비밀번호는 절대 저장되지
            않음
          </li>
        </ul>
      </div>

      <h4>2.3.2. 직접 구현 시 (권장하지 않음)</h4>

      <p>만약 직접 구현해야 한다면 (권장하지 않음):</p>

      <pre><code># Python (FastAPI) - 권장하지 않음, Supabase Auth 사용 권장
from passlib.context import CryptContext

pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")

def hash_password(password: str) -> str:
    """비밀번호 해싱 (bcrypt)"""
    return pwd_context.hash(password)

def verify_password(plain_password: str, hashed_password: str) -> bool:
    """비밀번호 검증"""
    return pwd_context.verify(plain_password, hashed_password)</code></pre>

      <h3>2.4. 파일 스토리지 암호화 (Supabase Storage)</h3>

      <h4>2.4.1. 기본 암호화</h4>

      <p>
        Supabase Storage는 모든 파일을 <strong>자동으로 암호화</strong>하여
        저장합니다.
      </p>

      <table>
        <thead>
          <tr>
            <th>항목</th>
            <th>설명</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>저장 시 암호화</strong></td>
            <td>AES-256으로 모든 파일 자동 암호화</td>
          </tr>
          <tr>
            <td><strong>전송 시 암호화</strong></td>
            <td>HTTPS로 업로드/다운로드 모두 암호화</td>
          </tr>
          <tr>
            <td><strong>접근 제어</strong></td>
            <td>Storage 정책으로 접근 권한 제어</td>
          </tr>
        </tbody>
      </table>

      <h4>2.4.2. Storage 보안 정책 예시</h4>

      <pre><code>-- 프로필 이미지 버킷 정책 (본인만 업로드/수정)
CREATE POLICY "Users can upload own profile image"
ON storage.objects FOR INSERT
TO authenticated
WITH CHECK (
  bucket_id = 'profiles' AND
  (storage.foldername(name))[1] = auth.uid()::text
);

CREATE POLICY "Users can update own profile image"
ON storage.objects FOR UPDATE
TO authenticated
USING (
  bucket_id = 'profiles' AND
  (storage.foldername(name))[1] = auth.uid()::text
);

CREATE POLICY "Public can view profile images"
ON storage.objects FOR SELECT
TO public
USING (bucket_id = 'profiles');</code></pre>

      <h3>2.5. 모바일 앱 암호화 (Flutter)</h3>

      <h4>2.5.1. Secure Storage 사용</h4>

      <p>
        모바일 앱에서 <strong>민감한 정보(토큰, API 키 등)</strong>는 Secure
        Storage에 저장해야 합니다.
      </p>

      <pre><code>// Flutter - flutter_secure_storage 사용
import 'package:flutter_secure_storage/flutter_secure_storage.dart';

final storage = FlutterSecureStorage(
  aOptions: AndroidOptions(
    encryptedSharedPreferences: true,
  ),
  iOptions: IOSOptions(
    accessibility: KeychainAccessibility.first_unlock_this_device,
  ),
);

// 토큰 저장
await storage.write(key: 'access_token', value: token);

// 토큰 읽기
String? token = await storage.read(key: 'access_token');

// 토큰 삭제
await storage.delete(key: 'access_token');</code></pre>

      <h4>2.5.2. Certificate Pinning</h4>

      <p>
        MITM(Man-in-the-Middle) 공격을 방지하기 위해 Certificate Pinning을
        구현합니다.
      </p>

      <pre><code>// Flutter - dio_certificate_pinning 사용
import 'package:dio/dio.dart';
import 'package:dio_certificate_pinning/dio_certificate_pinning.dart';

final dio = Dio()
  ..interceptors.add(
    CertificatePinningInterceptor(
      allowedSHAFingerprints: [
        'SHA256 Fingerprint of your certificate',
      ],
    ),
  );</code></pre>

      <div class="page-number">2</div>
    </div>

    <!-- 제3장: 결제 보안 -->
    <div class="page" id="chapter-03">
      <div class="section-header">
        <div class="section-badge">Chapter 03</div>
        <h2 class="section-title">결제 보안</h2>
      </div>

      <h3>3.1. PCI DSS 준수</h3>

      <h4>3.1.1. PCI DSS란?</h4>

      <p>
        <strong>PCI DSS (Payment Card Industry Data Security Standard)</strong
        >는 신용카드 정보를 안전하게 처리하기 위한 보안 표준입니다.
      </p>

      <div class="alert alert-danger">
        <div class="alert-title">중요: 카드 정보 저장 금지</div>
        <p style="margin-top: 8px">
          특별시는 <strong>카드 정보를 직접 저장하지 않습니다</strong>. 모든
          결제는 토스페이먼츠를 통해 처리되며, 카드 정보는 토스페이먼츠가
          안전하게 보관합니다.
        </p>
      </div>

      <h4>3.1.2. PCI DSS 준수 수준</h4>

      <table>
        <thead>
          <tr>
            <th>구분</th>
            <th>설명</th>
            <th>특별시 적용</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Level 1</strong></td>
            <td>연간 카드 거래 600만 건 이상</td>
            <td>해당 없음 (초기 단계)</td>
          </tr>
          <tr>
            <td><strong>Level 2-4</strong></td>
            <td>연간 카드 거래 600만 건 미만</td>
            <td>토스페이먼츠가 대행 처리</td>
          </tr>
        </tbody>
      </table>

      <div class="alert alert-info">
        <div class="alert-title">토스페이먼츠의 PCI DSS 준수</div>
        <p style="margin-top: 8px">
          토스페이먼츠는 <strong>PCI DSS Level 1 인증</strong>을 받았으므로,
          토스페이먼츠를 통해 결제를 처리하면 PCI DSS 준수 의무를 회피할 수
          있습니다. 단, 카드 정보를 절대 저장하지 않아야 합니다.
        </p>
      </div>

      <h3>3.2. 토스페이먼츠 보안 구현</h3>

      <h4>3.2.1. 서버 사이드 검증 (필수)</h4>

      <p>
        모든 결제 요청은 <strong>서버 사이드에서 검증</strong>되어야 합니다.
        클라이언트에서의 검증만으로는 충분하지 않습니다.
      </p>

      <pre><code># FastAPI - 결제 검증 예시
from fastapi import APIRouter, HTTPException, Header
from pydantic import BaseModel
import hmac
import hashlib

router = APIRouter(prefix="/payments", tags=["payments"])

class PaymentVerificationRequest(BaseModel):
    paymentKey: str
    orderId: str
    amount: int

@router.post("/confirm")
async def confirm_payment(
    request: PaymentVerificationRequest,
    authorization: str = Header(...)
):
    """결제 승인 요청 (서버 사이드)"""
    
    # 1. 주문 정보 검증 (DB에서 조회)
    order = await get_order(request.orderId)
    if not order:
        raise HTTPException(status_code=404, detail="Order not found")
    
    # 2. 결제 금액 검증
    if request.amount != order.amount:
        raise HTTPException(status_code=400, detail="Amount mismatch")
    
    # 3. 토스페이먼츠 API 호출
    response = await toss_payments_api.confirm(
        paymentKey=request.paymentKey,
        orderId=request.orderId,
        amount=request.amount
    )
    
    # 4. 결제 결과 DB 저장
    await save_payment_result(response)
    
    return response</code></pre>

      <h4>3.2.2. 웹훅 서명 검증 (필수)</h4>

      <p>
        토스페이먼츠에서 전송하는 웹훅은 <strong>반드시 서명을 검증</strong>해야
        합니다.
      </p>

      <pre><code># FastAPI - 웹훅 서명 검증
import os
import hmac
import hashlib
import base64

TOSS_SECRET_KEY = os.getenv("TOSS_SECRET_KEY")

def verify_webhook_signature(
    authorization: str,
    payload: bytes
) -> bool:
    """웹훅 서명 검증"""
    
    # Authorization 헤더 형식: "Basic {signature}"
    if not authorization.startswith("Basic "):
        return False
    
    received_signature = authorization.replace("Basic ", "")
    
    # 서명 생성
    expected_signature = base64.b64encode(
        hmac.new(
            TOSS_SECRET_KEY.encode(),
            payload,
            hashlib.sha256
        ).digest()
    ).decode()
    
    # 서명 비교 (타이밍 공격 방지)
    return hmac.compare_digest(received_signature, expected_signature)

@router.post("/webhook")
async def handle_webhook(
    request: Request,
    authorization: str = Header(...)
):
    """토스페이먼츠 웹훅 처리"""
    
    body = await request.body()
    
    # 서명 검증
    if not verify_webhook_signature(authorization, body):
        raise HTTPException(status_code=401, detail="Invalid signature")
    
    # 웹훅 처리
    webhook_data = await request.json()
    await process_webhook(webhook_data)
    
    return {"status": "ok"}</code></pre>

      <h3>3.3. 결제 정보 저장 규칙</h3>

      <h4>3.3.1. 저장 가능한 정보</h4>

      <table>
        <thead>
          <tr>
            <th>정보</th>
            <th>저장 가능 여부</th>
            <th>비고</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>결제 키 (paymentKey)</td>
            <td>예</td>
            <td>토스페이먼츠가 발급한 고유 키</td>
          </tr>
          <tr>
            <td>주문 ID (orderId)</td>
            <td>예</td>
            <td>자체 생성한 주문 번호</td>
          </tr>
          <tr>
            <td>결제 금액</td>
            <td>예</td>
            <td>거래 기록용</td>
          </tr>
          <tr>
            <td>결제 방법</td>
            <td>예</td>
            <td>카드, 계좌이체 등</td>
          </tr>
          <tr style="background: #fef2f2">
            <td><strong>카드 번호 (일부/전체)</strong></td>
            <td><strong>절대 불가</strong></td>
            <td>PCI DSS 위반</td>
          </tr>
          <tr style="background: #fef2f2">
            <td><strong>카드 유효기간</strong></td>
            <td><strong>절대 불가</strong></td>
            <td>PCI DSS 위반</td>
          </tr>
          <tr style="background: #fef2f2">
            <td><strong>CVV/CVC</strong></td>
            <td><strong>절대 불가</strong></td>
            <td>PCI DSS 위반</td>
          </tr>
        </tbody>
      </table>

      <h4>3.3.2. 결제 정보 저장 예시</h4>

      <pre><code>-- 결제 정보 저장 스키마 (안전한 필드만 저장)
CREATE TABLE payments (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    order_id VARCHAR(255) UNIQUE NOT NULL,
    payment_key VARCHAR(255) NOT NULL,  -- 토스페이먼츠 paymentKey
    amount INTEGER NOT NULL,
    payment_method VARCHAR(50),  -- CARD, TRANSFER 등
    status VARCHAR(50) NOT NULL,  -- DONE, CANCELED, PARTIAL_CANCELED
    approved_at TIMESTAMPTZ,
    canceled_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 카드 정보는 절대 저장하지 않음
-- 토스페이먼츠에서만 관리</code></pre>

      <h3>3.4. 에스크로 보안</h3>

      <h4>3.4.1. 에스크로 프로세스</h4>

      <p>
        에스크로는 <strong>서비스 완료 전까지 결제 대금을 임시 보관</strong>하는
        서비스입니다.
      </p>

      <ol class="numbered-list">
        <li><strong>결제 요청:</strong> 고객이 결제 요청 (토스페이먼츠)</li>
        <li><strong>대금 보관:</strong> 토스페이먼츠가 대금 임시 보관</li>
        <li><strong>서비스 진행:</strong> 프리랜서가 서비스 제공</li>
        <li><strong>완료 확인:</strong> 고객이 서비스 완료 확인</li>
        <li><strong>정산 처리:</strong> 프리랜서에게 대금 정산</li>
      </ol>

      <h4>3.4.2. 에스크로 보안 체크리스트</h4>

      <ul class="checklist">
        <li>에스크로 계약서 작성 및 보관</li>
        <li>정산 금액 이중 검증 (고객 결제 금액 = 프리랜서 정산 금액)</li>
        <li>정산 시점 검증 (서비스 완료 확인 후에만 정산)</li>
        <li>정산 이력 로그 기록 (누가, 언제, 얼마를 정산했는지)</li>
        <li>이상 거래 감지 시스템 (대량 정산, 반복 취소 등)</li>
      </ul>

      <div class="page-number">3</div>
    </div>

    <!-- 제4장: 데이터 유출 대응 -->
    <div class="page" id="chapter-04">
      <div class="section-header">
        <div class="section-badge">Chapter 04</div>
        <h2 class="section-title">데이터 유출 대응</h2>
      </div>

      <h3>4.1. 데이터 유출 정의</h3>

      <p>
        <strong>데이터 유출</strong>은 개인정보가 외부에 노출되거나 무단으로
        접근되는 사고를 의미합니다.
      </p>

      <table>
        <thead>
          <tr>
            <th>유형</th>
            <th>예시</th>
            <th>심각도</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>외부 해킹</strong></td>
            <td>SQL Injection, XSS 공격으로 DB 접근</td>
            <td>매우 높음</td>
          </tr>
          <tr>
            <td><strong>내부자 유출</strong></td>
            <td>직원이 고의/과실로 데이터 유출</td>
            <td>높음</td>
          </tr>
          <tr>
            <td><strong>시스템 오류</strong></td>
            <td>설정 오류로 인한 공개 접근</td>
            <td>중간</td>
          </tr>
          <tr>
            <td><strong>물리적 분실</strong></td>
            <td>노트북, USB 분실</td>
            <td>중간</td>
          </tr>
        </tbody>
      </table>

      <h3>4.2. 데이터 유출 대응 절차</h3>

      <h4>4.2.1. 1단계: 발견 및 차단 (0-1시간)</h4>

      <ol class="numbered-list">
        <li><strong>유출 경로 차단:</strong> 즉시 공격 경로 차단</li>
        <li><strong>시스템 격리:</strong> 영향받은 시스템 격리</li>
        <li><strong>접근 권한 차단:</strong> 의심되는 계정 접근 차단</li>
        <li><strong>로그 보존:</strong> 모든 로그 보존 (증거 자료)</li>
      </ol>

      <div class="alert alert-danger">
        <div class="alert-title">긴급 조치</div>
        <ul style="margin-top: 8px">
          <li>최대한 빠르게 차단 (1시간 이내)</li>
          <li>모든 조치 사항 기록 (언제, 무엇을, 누가)</li>
          <li>외부 전문가 자문 (필요시)</li>
        </ul>
      </div>

      <h4>4.2.2. 2단계: 피해 규모 파악 (1-24시간)</h4>

      <ol class="numbered-list">
        <li>
          <strong>유출 데이터 범위 확인:</strong> 어떤 데이터가 유출되었는지
        </li>
        <li><strong>유출 규모 산정:</strong> 몇 명의 정보가 유출되었는지</li>
        <li><strong>유출 경로 분석:</strong> 어떻게 유출되었는지</li>
        <li><strong>피해자 명단 작성:</strong> 유출된 사용자 목록</li>
      </ol>

      <h4>4.2.3. 3단계: 법적 보고 (24시간 이내)</h4>

      <div class="alert alert-warning">
        <div class="alert-title">개인정보보호법 보고 의무</div>
        <p style="margin-top: 8px">
          <strong>개인정보 유출 사실을 발견한 때부터 24시간 이내</strong>에
          개인정보보호위원회에 신고해야 합니다.
        </p>
      </div>

      <table>
        <thead>
          <tr>
            <th>기관</th>
            <th>신고 기한</th>
            <th>신고 방법</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>개인정보보호위원회</strong></td>
            <td>24시간 이내</td>
            <td>온라인 신고 (privacy.go.kr)</td>
          </tr>
          <tr>
            <td><strong>경찰청 사이버수사대</strong></td>
            <td>즉시 (해킹 의심 시)</td>
            <td>전화 신고 (국번없이 182)</td>
          </tr>
          <tr>
            <td><strong>한국인터넷진흥원 (KISA)</strong></td>
            <td>24시간 이내</td>
            <td>온라인 신고 (privacy.kisa.or.kr)</td>
          </tr>
        </tbody>
      </table>

      <h4>4.2.4. 4단계: 피해자 고지 (5일 이내)</h4>

      <p>
        유출된 개인정보의 주체에게 <strong>5일 이내</strong>에 다음 사항을
        고지해야 합니다.
      </p>

      <ul class="checklist">
        <li>유출된 개인정보 항목</li>
        <li>유출 시점 및 경로</li>
        <li>유출로 인한 피해 발생 가능성</li>
        <li>피해 예방 및 구제 조치</li>
        <li>문의처 (고객센터 전화번호, 이메일)</li>
      </ul>

      <h4>4.2.5. 5단계: 재발 방지 조치</h4>

      <ul class="checklist">
        <li>취약점 패치</li>
        <li>보안 시스템 강화</li>
        <li>접근 권한 재검토</li>
        <li>보안 교육 실시</li>
        <li>정기 보안 점검 강화</li>
      </ul>

      <h3>4.3. 데이터 유출 대응 체크리스트</h3>

      <div class="alert alert-info">
        <div class="alert-title">대응 체크리스트 (우선순위 순)</div>
        <ol style="margin-top: 8px">
          <li><strong>즉시:</strong> 유출 경로 차단, 시스템 격리</li>
          <li><strong>1시간 이내:</strong> 보안팀 통보, 초기 조사 시작</li>
          <li><strong>24시간 이내:</strong> 개인정보보호위원회 신고</li>
          <li><strong>5일 이내:</strong> 피해자 고지</li>
          <li><strong>1주일 이내:</strong> 원인 분석, 재발 방지 조치</li>
        </ol>
      </div>

      <div class="page-number">4</div>
    </div>

    <!-- 제5장: GDPR/개인정보보호법 준수 -->
    <div class="page" id="chapter-05">
      <div class="section-header">
        <div class="section-badge">Chapter 05</div>
        <h2 class="section-title">GDPR/개인정보보호법 준수</h2>
      </div>

      <h3>5.1. 개인정보보호법 (한국) 주요 원칙</h3>

      <h4>5.1.1. 수집 최소화 원칙</h4>

      <p>
        개인정보는 <strong>수집 목적에 필요한 최소한의 정보만</strong> 수집해야
        합니다.
      </p>

      <table>
        <thead>
          <tr>
            <th>수집 목적</th>
            <th>필수 정보</th>
            <th>선택 정보</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>회원가입</strong></td>
            <td>이메일, 비밀번호, 이름</td>
            <td>전화번호, 프로필 사진</td>
          </tr>
          <tr>
            <td><strong>프리랜서 인증</strong></td>
            <td>사업자등록번호, 포트폴리오</td>
            <td>경력 사항, 수상 이력</td>
          </tr>
          <tr>
            <td><strong>매칭 서비스</strong></td>
            <td>스타일 선호, 예산, 일정</td>
            <td>희망 장소, 특별 요청사항</td>
          </tr>
        </tbody>
      </table>

      <h4>5.1.2. 목적 외 사용 금지</h4>

      <p>
        수집한 개인정보는
        <strong>수집 목적 외의 용도로 사용할 수 없습니다</strong>.
      </p>

      <div class="alert alert-warning">
        <div class="alert-title">목적 외 사용 금지 예시</div>
        <ul style="margin-top: 8px">
          <li><strong>금지:</strong> 회원 정보를 제3자에게 판매/제공</li>
          <li>
            <strong>금지:</strong> 마케팅 목적으로 수집한 정보를 다른 용도로
            사용
          </li>
          <li>
            <strong>허용:</strong> 서비스 개선을 위한 통계 분석 (익명화 처리)
          </li>
        </ul>
      </div>

      <h4>5.1.3. 보유 기간 및 파기</h4>

      <table>
        <thead>
          <tr>
            <th>정보 유형</th>
            <th>보유 기간</th>
            <th>파기 방법</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>회원 정보</strong></td>
            <td>회원 탈퇴 시까지</td>
            <td>전자적 파일: 복원 불가능한 방법으로 삭제</td>
          </tr>
          <tr>
            <td><strong>결제 정보</strong></td>
            <td>5년 (전자상거래법)</td>
            <td>법정 보관 기간 후 삭제</td>
          </tr>
          <tr>
            <td><strong>로그 정보</strong></td>
            <td>3개월</td>
            <td>자동 삭제</td>
          </tr>
        </tbody>
      </table>

      <h3>5.2. 정보주체의 권리</h3>

      <h4>5.2.1. 열람 권리</h4>

      <p>
        정보주체는 자신의 개인정보를 <strong>언제든지 열람</strong>할 수
        있습니다.
      </p>

      <ul class="checklist">
        <li>개인정보 열람 기능 제공 (마이페이지)</li>
        <li>열람 요청 시 10일 이내 응답</li>
        <li>열람 내역 로그 기록</li>
      </ul>

      <h4>5.2.2. 정정/삭제 권리</h4>

      <p>
        정보주체는 자신의 개인정보를 <strong>정정하거나 삭제</strong>할 수
        있습니다.
      </p>

      <pre><code>-- 개인정보 삭제 프로시저 예시
CREATE OR REPLACE FUNCTION delete_user_data(user_id UUID)
RETURNS void AS $$
BEGIN
    -- 1. 개인정보 마스킹 (로그 보존용)
    UPDATE users
    SET 
        email = 'deleted_' || gen_random_uuid()::text || '@deleted.com',
        name = '탈퇴한 사용자',
        phone = NULL,
        profile_image_url = NULL,
        bio = NULL,
        is_active = FALSE,
        deleted_at = NOW()
    WHERE id = user_id;
    
    -- 2. 관련 데이터 삭제/익명화
    UPDATE matchings
    SET user_id = NULL
    WHERE user_id = user_id;
    
    -- 3. 리뷰 익명화
    UPDATE reviews
    SET author_name = '익명'
    WHERE user_id = user_id;
END;
$$ LANGUAGE plpgsql;</code></pre>

      <h4>5.2.3. 처리 정지 권리</h4>

      <p>
        정보주체는 개인정보 처리를 <strong>정지</strong>할 수 있습니다. (단,
        법적 의무가 있는 경우 제외)
      </p>

      <h3>5.3. GDPR (EU) 준수 (향후 확장 대비)</h3>

      <h4>5.3.1. GDPR 주요 원칙</h4>

      <table>
        <thead>
          <tr>
            <th>원칙</th>
            <th>내용</th>
            <th>적용 방법</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>합법성</strong></td>
            <td>법적 근거가 있어야 함</td>
            <td>동의, 계약 이행, 법적 의무</td>
          </tr>
          <tr>
            <td><strong>투명성</strong></td>
            <td>처리 목적을 명확히 고지</td>
            <td>개인정보처리방침 명시</td>
          </tr>
          <tr>
            <td><strong>목적 제한</strong></td>
            <td>명시된 목적 외 사용 금지</td>
            <td>목적 외 사용 방지 시스템</td>
          </tr>
          <tr>
            <td><strong>데이터 최소화</strong></td>
            <td>필요한 최소한만 수집</td>
            <td>수집 항목 최소화</td>
          </tr>
          <tr>
            <td><strong>정확성</strong></td>
            <td>정확하고 최신 상태 유지</td>
            <td>정기 업데이트 요청</td>
          </tr>
          <tr>
            <td><strong>저장 제한</strong></td>
            <td>필요한 기간만 보관</td>
            <td>자동 삭제 시스템</td>
          </tr>
          <tr>
            <td><strong>무결성 및 기밀성</strong></td>
            <td>안전하게 처리 및 보호</td>
            <td>암호화, 접근 제어</td>
          </tr>
          <tr>
            <td><strong>책임성</strong></td>
            <td>준수 증명 책임</td>
            <td>문서화, 감사 로그</td>
          </tr>
        </tbody>
      </table>

      <h4>5.3.2. GDPR 특별 권리</h4>

      <ul class="checklist">
        <li>
          <strong>잊혀질 권리 (Right to be forgotten):</strong> 데이터 삭제 요청
        </li>
        <li>
          <strong>데이터 이동권 (Data portability):</strong> 데이터 이전 요청
          (JSON/CSV 제공)
        </li>
        <li><strong>처리 제한 권리:</strong> 특정 목적으로만 처리 제한</li>
        <li><strong>반대 권리:</strong> 특정 처리에 대한 반대</li>
      </ul>

      <h3>5.4. 개인정보처리방침 작성 가이드</h3>

      <h4>5.4.1. 필수 포함 사항</h4>

      <ul class="checklist">
        <li>개인정보의 처리 목적</li>
        <li>처리하는 개인정보의 항목</li>
        <li>개인정보의 처리 및 보유 기간</li>
        <li>개인정보의 제3자 제공 (해당하는 경우)</li>
        <li>정보주체의 권리·의무 및 행사 방법</li>
        <li>개인정보의 파기</li>
        <li>개인정보 보호책임자 연락처</li>
      </ul>

      <div class="page-number">5</div>
    </div>

    <!-- 제6장: 보안 점검 체크리스트 -->
    <div class="page" id="chapter-06">
      <div class="section-header">
        <div class="section-badge">Chapter 06</div>
        <h2 class="section-title">보안 점검 체크리스트</h2>
      </div>

      <h3>6.1. 인증/인가 보안</h3>

      <h4>6.1.1. 인증 보안</h4>

      <ul class="checklist">
        <li>비밀번호 정책 강화 (최소 8자, 대소문자/숫자/특수문자 포함)</li>
        <li>
          JWT 토큰 만료 시간 설정 (Access Token: 15분, Refresh Token: 7일)
        </li>
        <li>Refresh Token 로테이션 구현</li>
        <li>로그인 실패 시 Rate Limiting (5회 실패 시 15분 차단)</li>
        <li>2FA (2단계 인증) 옵션 제공 (선택 사항)</li>
        <li>세션 타임아웃 설정 (30분 미사용 시 자동 로그아웃)</li>
      </ul>

      <h4>6.1.2. 인가 보안 (RLS)</h4>

      <pre><code>-- Supabase RLS 정책 점검 체크리스트

-- 1. 모든 테이블에 RLS 활성화 확인
ALTER TABLE users ENABLE ROW LEVEL SECURITY;
ALTER TABLE matchings ENABLE ROW LEVEL SECURITY;
ALTER TABLE portfolios ENABLE ROW LEVEL SECURITY;
ALTER TABLE reviews ENABLE ROW LEVEL SECURITY;

-- 2. 본인만 조회/수정 가능한 테이블
CREATE POLICY "Users can view own profile"
ON users FOR SELECT
USING (auth.uid() = id);

CREATE POLICY "Users can update own profile"
ON users FOR UPDATE
USING (auth.uid() = id);

-- 3. 관련자만 접근 가능한 테이블
CREATE POLICY "Users can view own matchings"
ON matchings FOR SELECT
USING (
  auth.uid() = user_id OR
  auth.uid() = provider_id
);

-- 4. 공개 조회만 가능한 테이블 (포트폴리오)
CREATE POLICY "Public can view portfolios"
ON portfolios FOR SELECT
TO public
USING (is_verified = TRUE);

CREATE POLICY "Providers can manage own portfolios"
ON portfolios FOR ALL
TO authenticated
USING (
  auth.uid() = provider_id AND
  EXISTS (SELECT 1 FROM providers WHERE id = provider_id)
);</code></pre>

      <h3>6.2. 입력 검증 및 Injection 방지</h3>

      <h4>6.2.1. SQL Injection 방지</h4>

      <ul class="checklist">
        <li>Parameterized Query 사용 (준비된 문)</li>
        <li>ORM 사용 (Supabase Client, SQLAlchemy 등)</li>
        <li>동적 SQL 사용 금지</li>
        <li>사용자 입력 직접 쿼리에 포함 금지</li>
      </ul>

      <h4>6.2.2. XSS (Cross-Site Scripting) 방지</h4>

      <ul class="checklist">
        <li>사용자 입력 출력 시 이스케이프 처리</li>
        <li>Content Security Policy (CSP) 설정</li>
        <li>Rich Text Editor 사용 시 HTML 태그 화이트리스트 적용</li>
        <li>이메일, 리뷰 등 사용자 입력 필드 검증</li>
      </ul>

      <h4>6.2.3. 파일 업로드 보안</h4>

      <ul class="checklist">
        <li>파일 타입 검증 (확장자, MIME 타입)</li>
        <li>파일 크기 제한 (이미지: 10MB, 영상: 100MB)</li>
        <li>파일명 난독화 (UUID 사용)</li>
        <li>악성 코드 검사 (바이러스 스캔)</li>
        <li>업로드 경로 제한 (특정 디렉토리만)</li>
      </ul>

      <h3>6.3. API 보안</h3>

      <h4>6.3.1. API 인증</h4>

      <ul class="checklist">
        <li>모든 API 엔드포인트 인증 필수</li>
        <li>API 키 노출 방지 (환경 변수 사용)</li>
        <li>서비스 역할 키 보호 (Supabase Service Role Key)</li>
        <li>토큰 만료 시간 적절히 설정</li>
      </ul>

      <h4>6.3.2. Rate Limiting</h4>

      <ul class="checklist">
        <li>로그인 API: 분당 5회 제한</li>
        <li>회원가입 API: 시간당 3회 제한</li>
        <li>결제 API: 분당 10회 제한</li>
        <li>일반 API: 분당 100회 제한</li>
      </ul>

      <h4>6.3.3. CORS 설정</h4>

      <pre><code># FastAPI - CORS 설정 예시
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "https://teukbyulsi.app",  # 프로덕션 도메인만
        "https://www.teukbyulsi.app",
    ],
    allow_credentials=True,
    allow_methods=["GET", "POST", "PUT", "DELETE"],
    allow_headers=["*"],
    max_age=3600,
)</code></pre>

      <h3>6.4. 환경 변수 및 시크릿 관리</h3>

      <h4>6.4.1. 환경 변수 관리</h4>

      <ul class="checklist">
        <li>.env 파일 Git 커밋 금지 (.gitignore 추가)</li>
        <li>.env.example 파일 제공 (값 없이 키만)</li>
        <li>프로덕션 환경 변수는 별도 관리 (Vercel, Railway 환경 변수)</li>
        <li>
          환경 변수 암호화 (선택 사항: AWS Secrets Manager, HashiCorp Vault)
        </li>
      </ul>

      <h4>6.4.2. 시크릿 로테이션</h4>

      <ul class="checklist">
        <li>API 키 90일마다 로테이션</li>
        <li>데이터베이스 비밀번호 180일마다 로테이션</li>
        <li>암호화 키 90일마다 로테이션</li>
        <li>로테이션 이력 기록</li>
      </ul>

      <h3>6.5. 로깅 및 모니터링</h3>

      <h4>6.5.1. 보안 로그</h4>

      <ul class="checklist">
        <li>로그인 시도 (성공/실패)</li>
        <li>권한 변경 이력</li>
        <li>결제 트랜잭션 로그</li>
        <li>개인정보 접근 로그</li>
        <li>관리자 작업 로그</li>
      </ul>

      <h4>6.5.2. 로그 보안</h4>

      <ul class="checklist">
        <li>개인정보 마스킹 (전화번호, 이메일 일부 마스킹)</li>
        <li>비밀번호 절대 로깅 금지</li>
        <li>로그 파일 접근 권한 제한</li>
        <li>로그 보관 기간 설정 (3개월~1년)</li>
      </ul>

      <h3>6.6. 정기 보안 점검 일정</h3>

      <table>
        <thead>
          <tr>
            <th>점검 항목</th>
            <th>빈도</th>
            <th>담당</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>보안 취약점 스캔</strong></td>
            <td>월 1회</td>
            <td>보안팀</td>
          </tr>
          <tr>
            <td><strong>의존성 업데이트 점검</strong></td>
            <td>주 1회</td>
            <td>개발팀</td>
          </tr>
          <tr>
            <td><strong>접근 권한 검토</strong></td>
            <td>분기 1회</td>
            <td>운영팀</td>
          </tr>
          <tr>
            <td><strong>보안 로그 분석</strong></td>
            <td>주 1회</td>
            <td>보안팀</td>
          </tr>
          <tr>
            <td><strong>침투 테스트</strong></td>
            <td>연 1회</td>
            <td>외부 전문가</td>
          </tr>
        </tbody>
      </table>

      <div class="page-number">6</div>
    </div>

    <!-- 제7장: 보안 인시던트 대응 -->
    <div class="page" id="chapter-07">
      <div class="section-header">
        <div class="section-badge">Chapter 07</div>
        <h2 class="section-title">보안 인시던트 대응</h2>
      </div>

      <h3>7.1. 인시던트 대응팀 구성</h3>

      <table>
        <thead>
          <tr>
            <th>역할</th>
            <th>책임</th>
            <th>연락처</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>인시던트 책임자</strong></td>
            <td>전체 대응 조율, 의사결정</td>
            <td>[담당자 연락처]</td>
          </tr>
          <tr>
            <td><strong>기술 대응팀</strong></td>
            <td>시스템 차단, 복구, 취약점 패치</td>
            <td>[개발팀 연락처]</td>
          </tr>
          <tr>
            <td><strong>법무팀</strong></td>
            <td>법적 보고, 고지 문서 작성</td>
            <td>[법무팀 연락처]</td>
          </tr>
          <tr>
            <td><strong>고객지원팀</strong></td>
            <td>피해자 고지, 고객 문의 대응</td>
            <td>[CS팀 연락처]</td>
          </tr>
        </tbody>
      </table>

      <h3>7.2. 인시던트 대응 프로세스</h3>

      <h4>7.2.1. 발견 (Discovery)</h4>

      <ol class="numbered-list">
        <li>인시던트 발견 (모니터링, 신고, 우연한 발견)</li>
        <li>초기 정보 수집 (언제, 무엇이, 어디서)</li>
        <li>심각도 평가 (낮음/중간/높음/매우높음)</li>
        <li>인시던트 책임자 통보</li>
      </ol>

      <h4>7.2.2. 차단 (Containment)</h4>

      <ol class="numbered-list">
        <li>영향 범위 파악</li>
        <li>공격 경로 차단</li>
        <li>시스템 격리 (필요시)</li>
        <li>증거 보존 (로그, 덤프 파일)</li>
      </ol>

      <h4>7.2.3. 제거 (Eradication)</h4>

      <ol class="numbered-list">
        <li>악성 코드 제거</li>
        <li>취약점 패치</li>
        <li>계정 비활성화 (해킹된 계정)</li>
        <li>비밀번호 초기화</li>
      </ol>

      <h4>7.2.4. 복구 (Recovery)</h4>

      <ol class="numbered-list">
        <li>시스템 정상화</li>
        <li>서비스 재개</li>
        <li>모니터링 강화</li>
        <li>사용자 고지 (필요시)</li>
      </ol>

      <h4>7.2.5. 사후 처리 (Post-Incident)</h4>

      <ol class="numbered-list">
        <li>원인 분석 보고서 작성</li>
        <li>재발 방지 조치</li>
        <li>팀 리뷰 (Post-Mortem)</li>
        <li>문서화 및 공유</li>
      </ol>

      <h3>7.3. 인시던트 대응 템플릿</h3>

      <h4>7.3.1. 인시던트 보고서 양식</h4>

      <div
        style="
          background: var(--bg-light);
          padding: 20px;
          border-radius: 8px;
          margin: 16px 0;
        "
      >
        <p><strong>인시던트 보고서</strong></p>
        <ul style="margin-top: 12px; list-style: none; padding: 0">
          <li><strong>인시던트 ID:</strong> INC-2026-001</li>
          <li><strong>발견 일시:</strong> 2026-01-02 14:30</li>
          <li><strong>발견자:</strong> [이름]</li>
          <li><strong>유형:</strong> [해킹/유출/오류/기타]</li>
          <li><strong>심각도:</strong> [낮음/중간/높음/매우높음]</li>
          <li><strong>영향 범위:</strong> [몇 명의 정보, 어떤 시스템]</li>
          <li><strong>초기 조치:</strong> [무엇을 했는지]</li>
          <li><strong>상태:</strong> [진행중/해결/종료]</li>
        </ul>
      </div>

      <h3>7.4. 연락처 목록</h3>

      <table>
        <thead>
          <tr>
            <th>기관/부서</th>
            <th>연락처</th>
            <th>용도</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>개인정보보호위원회</strong></td>
            <td>privacy.go.kr / 02-2100-3000</td>
            <td>개인정보 유출 신고</td>
          </tr>
          <tr>
            <td><strong>경찰청 사이버수사대</strong></td>
            <td>국번없이 182</td>
            <td>해킹, 사이버 범죄 신고</td>
          </tr>
          <tr>
            <td><strong>한국인터넷진흥원 (KISA)</strong></td>
            <td>privacy.kisa.or.kr / 02-405-5118</td>
            <td>개인정보 유출 신고, 기술 지원</td>
          </tr>
          <tr>
            <td><strong>토스페이먼츠 고객센터</strong></td>
            <td>[토스페이먼츠 연락처]</td>
            <td>결제 보안 이슈</td>
          </tr>
          <tr>
            <td><strong>Supabase 지원</strong></td>
            <td>support@supabase.io</td>
            <td>데이터베이스 보안 이슈</td>
          </tr>
        </tbody>
      </table>

      <div
        style="
          margin-top: 60px;
          padding-top: 20px;
          border-top: 2px solid var(--border);
          text-align: center;
          color: var(--text-light);
        "
      >
        <p><strong>© 2026 The Special Time. All Rights Reserved.</strong></p>
        <p style="margin-top: 8px; font-size: 12px">
          본 가이드는 보안 및 프라이버시 정책 수립 시 참고용입니다. 보안 위협은
          지속적으로 변화하므로 정기적인 업데이트가 필요합니다.
        </p>
      </div>

      <div class="page-number">7</div>
    </div>

    <script>
      const navLinks = document.querySelectorAll(".sidebar-nav a");
      const sections = document.querySelectorAll(".page[id]");

      function updateActiveNav() {
        let current = "";
        sections.forEach((section) => {
          const sectionTop = section.offsetTop;
          if (window.scrollY >= sectionTop - 200) {
            current = section.getAttribute("id");
          }
        });

        navLinks.forEach((link) => {
          link.classList.remove("active");
          if (link.getAttribute("href") === `#${current}`) {
            link.classList.add("active");
          }
        });
      }

      window.addEventListener("scroll", updateActiveNav);
      updateActiveNav();

      navLinks.forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const targetId = link.getAttribute("href").substring(1);
          const targetSection = document.getElementById(targetId);
          if (targetSection) {
            targetSection.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        });
      });
    </script>
  </body>
</html>
